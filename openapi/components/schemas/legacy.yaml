CreateScriptAction:
  type: object
  additionalProperties: false
  properties:
    title:
      type: string
      description: Title for the new script.
      x-oapi-codegen-extra-tags:
        tfsdk: "title"
    time_limit:
      type: integer
      description: Maximum number of seconds the script may execute.
      x-oapi-codegen-extra-tags:
        tfsdk: "time_limit"
    code:
      type: string
      description: Script contents encoded as base64 UTF-8.
      x-oapi-codegen-extra-tags:
        tfsdk: "code"
    username:
      type: string
      description: System user under which the script runs.
      x-oapi-codegen-extra-tags:
        tfsdk: "username"
    access_group:
      type: string
      description: Access group to assign the script to.
      x-oapi-codegen-extra-tags:
        tfsdk: "access_group"
  required:
    - title
    - code

EditScriptAction:
  type: object
  additionalProperties: false
  properties:
    script_id:
      type: integer
      description: Identifier of the script being edited.
      x-oapi-codegen-extra-tags:
        tfsdk: "script_id"
    title:
      type: string
      description: Updated script title.
      x-oapi-codegen-extra-tags:
        tfsdk: "title"
    time_limit:
      type: integer
      description: Updated execution time limit in seconds.
      x-oapi-codegen-extra-tags:
        tfsdk: "time_limit"
    code:
      type: string
      description: Updated script contents encoded as base64 UTF-8.
      x-oapi-codegen-extra-tags:
        tfsdk: "code"
    username:
      type: string
      description: Updated system user to execute the script.
      x-oapi-codegen-extra-tags:
        tfsdk: "username"
  required:
    - script_id

CopyScriptAction:
  type: object
  additionalProperties: false
  properties:
    script_id:
      type: integer
      description: ID of the script to copy.
      x-oapi-codegen-extra-tags:
        tfsdk: "script_id"
    destination_title:
      type: string
      description: Title for the cloned script.
      x-oapi-codegen-extra-tags:
        tfsdk: "destination_title"
    access_group:
      type: string
      description: Access group for the cloned script.
      x-oapi-codegen-extra-tags:
        tfsdk: "access_group"
  required:
    - script_id
    - destination_title

RemoveScriptAction:
  type: object
  additionalProperties: false
  properties:
    script_id:
      type: integer
      description: Identifier of the script to remove.
      x-oapi-codegen-extra-tags:
        tfsdk: "script_id"
  required:
    - script_id

CreateScriptAttachmentAction:
  type: object
  additionalProperties: false
  properties:
    script_id:
      type: integer
      description: Identifier of the script receiving the attachment.
      x-oapi-codegen-extra-tags:
        tfsdk: "script_id"
    file:
      type: string
      description: Attachment payload in the format `<filename>$$<base64 contents>`.
      x-oapi-codegen-extra-tags:
        tfsdk: "file"
  required:
    - script_id
    - file

RemoveScriptAttachmentAction:
  type: object
  additionalProperties: false
  properties:
    script_id:
      type: integer
      description: Identifier of the script owning the attachment.
      x-oapi-codegen-extra-tags:
        tfsdk: "script_id"
    filename:
      type: string
      description: Name of the attachment to remove.
      x-oapi-codegen-extra-tags:
        tfsdk: "filename"
  required:
    - script_id
    - filename

LegacyActionRequest:
  description: Legacy actions accept their parameters via query string and do not define a request body schema.
  type: object

CreateScriptAttachmentResult:
  type: object
  additionalProperties: false
  properties:
    filename:
      type: string
      description: Name of the attachment that was created.
      x-oapi-codegen-extra-tags:
        tfsdk: "filename"
  required:
    - filename

LegacyActionResult:
  oneOf:
    - $ref: "../schemas/script.yaml#/Script"
    - $ref: "#/CreateScriptAttachmentResult"
